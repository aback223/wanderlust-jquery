<ol class="breadcrumb text-center" style="margin-top: 20px ">
  <li class="breadcrumb-item active"><%= link_to "Latest Updates", welcome_path %></a></li>
  <li class="breadcrumb-item in-active"><%= "#{@user.firstname}'s Page" %></li>
  <li class="breadcrumb-item in-active"><a href="#" class="js-next" data-id="<%=@user.id%>"><strong>Explore More Users >></a></strong></li>
</ol>

<div class="container">
  <div class="row">
    <div class="col-xs-3"></div>
    <div class="col-xs-5">
      <div class="text-center">
        <h2 class="tripsHeader">Upcoming Trips</h2><br>
      </div>
      <div class="text-center tripsList">
      <% if @upcoming_trips %>
          <% @upcoming_trips.each do |itinerary| %>
            <h4><%= link_to "#{itinerary.datestart.strftime("%m/%d/%Y")} - #{itinerary.trip_title}", user_itinerary_path(current_user, itinerary) %>
            <% if @user == current_user %>
              <strong><%= link_to "Delete", user_itinerary_path(@user, itinerary), method: :delete, data: {confirm: "Are you sure?"} %></strong></h4><br>
            <% else %>
            <br><br>
            <% end %>
          <% end %>
        </ul>
      <% else %>
        <p>You haven't made any plans yet!</p>
      <% end %>
    </div>
  </div>
</div>

<script type="text/javascript" charset="utf-8">
   $(function() {
    $(".js-next").on("click", function() {
      var nextId = parseInt($(".js-next").attr("data-id")) + 1;
      $.getJSON(`/users/` + nextId + ".json", function(data) {
        $(".tripsHeader").text("Trips");
        $(".js-next").attr("data-id", data["id"]);
        $(".tripsList").empty()
        for (i=0; i < data["itineraries"].length; i++) {
          $(".tripsList").append(
            `
            <h4>
            <a href="/itineraries/${data["itineraries"][i]["id"]}">${data["itineraries"][i]["datestart"]} - ${data["itineraries"][i]["trip_title"]}</a>
            </h4><br>
            `
          )
        }
      });
    });
  });
</script>